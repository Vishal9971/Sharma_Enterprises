<%- include('./partials/header') %> <%- include('./partials/navbar') %>

<div id="carouselExampleAutoplaying" class="carousel slide carousel-fade selfCarousel" data-bs-ride="carousel">
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img
        src="https://images.unsplash.com/photo-1697386576246-ab27cecf6151?auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHx0b3BpYy1mZWVkfDZ8NnNNVmpUTFNrZVF8fGVufDB8fHx8fA%3D%3D&w=500"
        class="d-block w-100"
        alt="..." />
    </div>
    <div class="carousel-item">
      <img
        src="https://images.unsplash.com/photo-1697386576502-812fce23b209?auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHx0b3BpYy1mZWVkfDd8NnNNVmpUTFNrZVF8fGVufDB8fHx8fA%3D%3D&w=500"
        class="d-block w-100"
        alt="..." />
    </div>
    <div class="carousel-item">
      <img
        src="https://images.unsplash.com/photo-1690230677207-126e472f37dc?auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHx0b3BpYy1mZWVkfDE4fDZzTVZqVExTa2VRfHxlbnwwfHx8fHw%3D&w=500"
        class="d-block w-100"
        alt="..." />
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>
<div class="d-flex flex-row selfCard m-5">
  <%for(let item of allProducts){%>

  <div class="card text-bg-secondary text-center m-5" style="width: 18rem">
    <img src="<%=item.img%>" class="card-img-top" id="selfImg" alt="..." />
    <span
      class="badge round-pill bg-light text-dark w-25 position-absolute translate-middle-y"
      style="top: 41%; left: 5%"></span>
      &star;|<%= item.review.length %></span
    >
    <div class="card-body">
      <h5 class="card-title d-flex justify-content-between align-items-center">
        <span><%= item.name %></span>
        <span class="btn like-btn" product-id="<%=item._id%>">
          <% if(currentUser && currentUser.wishList.includes(item._id)){ %>
            <i class="fas fa-heart"></i>
            <% }else{ %>
              <i class="far fa-heart"></i>
          <% } %>
        </span>
      </h5>

      <p class="card-text"><%=item.des%></p>
      <h3 class="fs-4"><%= item.price %></h3>
      <%if(item.review.length){%>
      <p class="text-muted"><%= item.review.length %> reviews</p>
      <%}else{%>
      <p class="text-muted">No reviews</p>
      <% } %>
      <a href="/products/<%=item._id%>/show" class="btn btn-primary p-3 fs-5">View Product</a>
    </div>
  </div>

  <%}%>
</div>
<script src="/js/common.js"></script>
<%- include('./partials/footer') %>
